"use strict";function Product(){this.$cart=$("#buy"),this.$buys=$(".addToCart"),this.addEvent(),this.init()}Product.prototype={constructor:Product,addEvent:function(){var e=this;this.$cart.click(function(){location.href="cart.html"}),this.$buys.each(function(){$(this).on("click",function(t){var i=$(this).parent().attr("data-good-id"),c=$(this).prev().prev().text(),o=parseInt($(this).prev().text()),r=$(this).siblings("img").attr("src"),n=$.cookie("products")?$.cookie("products"):"",n=convertStrToObj(n);i in n?n[i].num++:n[i]={name:c,price:o,src:r,num:1},$.cookie("products",JSON.stringify(n),{expires:7,path:"/"}),$(this).siblings("img").clone().css({width:50,height:50}).fly({start:{left:t.pageX,top:t.pageY},end:{left:e.$cart.offset().left,top:e.$cart.offset().top,width:0,height:0},onEnd:function(){var t=/(\d+)/.exec(e.$cart.val())[1];e.$cart.val("购物车(".concat(++t,")"))}})})})},init:function(){var t,i=$.cookie("products")?$.cookie("products"):"",c=convertStrToObj(i),o=0;for(t in c)o+=c[t].num;this.$cart.val("购物车(".concat(o,")"))}},new Product;